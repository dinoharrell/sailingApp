<!DOCTYPE html>
<html lang="en">
<head>
    </head>
<body class="p-4 flex flex-col items-center justify-center min-h-screen">
    <h1 class="text-xl font-bold mb-6 text-gray-400">SAILING SPEED MONITOR v2.5 (SOG)</h1>
    <script>
        // --- 1. CONFIGURATION ---
        const AVERAGE_WINDOW_10_SEC = 10;
        const AVERAGE_WINDOW_30_SEC = 30;
        const GRAPH_WINDOW_SEC = 60;
        const MAX_SAILING_SPEED_KNOTS = 70.0; 
        const KNOTS_PER_METER_PER_SECOND = 1.94384;
        const EARTH_RADIUS_METERS = 6371000;
        const DATA_KEY = 'sailingSpeedData';
        // ... (remaining configuration and functions are unchanged) ...

        // --- 6. INITIALIZATION (MaximumAge Change is here) ---

        function startGpsWatch() {
            loadData();
            initChart(); 
            
            if (navigator.geolocation) {
                showStatus(speedBuffer.length > 0 ? "GPS Initializing. Displaying historical data..." : "Waiting for GPS fix...", false);
                
                watchId = navigator.geolocation.watchPosition(
                    handlePosition,
                    handleError,
                    {
                        // Allows the browser to use a position fix up to 15 minutes old to start the loop.
                        // This should immediately trigger handlePosition.
                        timeout: 5000,            
                        maximumAge: 900000             
                    }
                );
            } else {
                handleError({ code: -1, message: "Geolocation is not supported by this browser." });
            }
        }

        document.addEventListener('DOMContentLoaded', startGpsWatch);
        
        // ... (remaining script is unchanged) ...
    </script>
</body>
</html>
